[RESULTADO] EXITOSO
--------------------------------------------------

Código original:
------------------------------
program FibonacciRecursive;
var
  i, n, fib_val : int; // Removed temp_fib_n_minus_1, temp_fib_n_minus_2 from global scope

// Calculates Fibonacci of x and stores it in global fib_val
void CalculateFib(x : int) [
  var // Added var block for local variables
    local_temp_fib_n_minus_1, local_temp_fib_n_minus_2 : int;
  {
    if (x < 2) {
      fib_val = x; // F(0) = 0, F(1) = 1
    } else {
      // Calculate Fib(x-1)
      CalculateFib(x-1);
      local_temp_fib_n_minus_1 = fib_val; // Use local variable

      // Calculate Fib(x-2)
      CalculateFib(x-2);
      local_temp_fib_n_minus_2 = fib_val; // Use local variable

      fib_val = local_temp_fib_n_minus_1 + local_temp_fib_n_minus_2; // Use local variables for calculation
    };
  }
];

main {
  n = 10; // Calculate Fibonacci sequence up to F(9)
  print("Recursive Fibonacci sequence up to F(9):");

  i = 0;
  while (i < n) do {
    CalculateFib(i); // Calculate Fibonacci for the current number 'i'
    print(fib_val);    // Print the calculated Fibonacci number
    i = i + 1;
  };
}
end


--------------------------------------------------

Tokens encontrados:
------------------------------
Token            |   Carácter
------------------------------
PROGRAM_KWORD    | 'program' 
ID               | 'FibonacciRecursive'
SEMICOLON        | ';'       
VAR_KWORD        | 'var'     
ID               | 'i'       
COMMA            | ','       
ID               | 'n'       
COMMA            | ','       
ID               | 'fib_val' 
COLON            | ':'       
INT_KWORD        | 'int'     
SEMICOLON        | ';'       
VOID_KWORD       | 'void'    
ID               | 'CalculateFib'
L_PARENTHESIS    | '('       
ID               | 'x'       
COLON            | ':'       
INT_KWORD        | 'int'     
R_PARENTHESIS    | ')'       
L_BRACKET        | '['       
VAR_KWORD        | 'var'     
ID               | 'local_temp_fib_n_minus_1'
COMMA            | ','       
ID               | 'local_temp_fib_n_minus_2'
COLON            | ':'       
INT_KWORD        | 'int'     
SEMICOLON        | ';'       
L_CURLY_BRACE    | '{'       
IF_KWORD         | 'if'      
L_PARENTHESIS    | '('       
ID               | 'x'       
LESS_THAN        | '<'       
CTE              | '2'       
R_PARENTHESIS    | ')'       
L_CURLY_BRACE    | '{'       
ID               | 'fib_val' 
EQUAL            | '='       
ID               | 'x'       
SEMICOLON        | ';'       
R_CURLY_BRACE    | '}'       
ELSE_KWORD       | 'else'    
L_CURLY_BRACE    | '{'       
ID               | 'CalculateFib'
L_PARENTHESIS    | '('       
ID               | 'x'       
MINUS            | '-'       
CTE              | '1'       
R_PARENTHESIS    | ')'       
SEMICOLON        | ';'       
ID               | 'local_temp_fib_n_minus_1'
EQUAL            | '='       
ID               | 'fib_val' 
SEMICOLON        | ';'       
ID               | 'CalculateFib'
L_PARENTHESIS    | '('       
ID               | 'x'       
MINUS            | '-'       
CTE              | '2'       
R_PARENTHESIS    | ')'       
SEMICOLON        | ';'       
ID               | 'local_temp_fib_n_minus_2'
EQUAL            | '='       
ID               | 'fib_val' 
SEMICOLON        | ';'       
ID               | 'fib_val' 
EQUAL            | '='       
ID               | 'local_temp_fib_n_minus_1'
PLUS             | '+'       
ID               | 'local_temp_fib_n_minus_2'
SEMICOLON        | ';'       
R_CURLY_BRACE    | '}'       
SEMICOLON        | ';'       
R_CURLY_BRACE    | '}'       
R_BRACKET        | ']'       
SEMICOLON        | ';'       
MAIN_KWORD       | 'main'    
L_CURLY_BRACE    | '{'       
ID               | 'n'       
EQUAL            | '='       
CTE              | '10'      
SEMICOLON        | ';'       
PRINT_KWORD      | 'print'   
L_PARENTHESIS    | '('       
STRING           | '"Recursive Fibonacci sequence up to F(9):"'
R_PARENTHESIS    | ')'       
SEMICOLON        | ';'       
ID               | 'i'       
EQUAL            | '='       
CTE              | '0'       
SEMICOLON        | ';'       
WHILE_KWORD      | 'while'   
L_PARENTHESIS    | '('       
ID               | 'i'       
LESS_THAN        | '<'       
ID               | 'n'       
R_PARENTHESIS    | ')'       
DO_KWORD         | 'do'      
L_CURLY_BRACE    | '{'       
ID               | 'CalculateFib'
L_PARENTHESIS    | '('       
ID               | 'i'       
R_PARENTHESIS    | ')'       
SEMICOLON        | ';'       
PRINT_KWORD      | 'print'   
L_PARENTHESIS    | '('       
ID               | 'fib_val' 
R_PARENTHESIS    | ')'       
SEMICOLON        | ';'       
ID               | 'i'       
EQUAL            | '='       
ID               | 'i'       
PLUS             | '+'       
CTE              | '1'       
SEMICOLON        | ';'       
R_CURLY_BRACE    | '}'       
SEMICOLON        | ';'       
R_CURLY_BRACE    | '}'       
END_KWORD        | 'end'     


Árbol sintáctico (raw):
------------------------------
program_vars_funcs
  program
  FibonacciRecursive
  ;
  vars_multiple_ids
    var
    i
    ,
    n
    ,
    fib_val
    :
    type_int	int
    ;
  funcs_id
    void
    CalculateFib
    (
    x
    :
    type_int	int
    )
    [
    vars_multiple_ids
      var
      local_temp_fib_n_minus_1
      ,
      local_temp_fib_n_minus_2
      :
      type_int	int
      ;
    body_statement
      {
      statement
        condition_if_else
          if
          (
          expression_less_than
            exp_simple
              term_simple
                factor_id	x
            <
            exp_simple
              term_simple
                factor_cte	2
          )
          body_statement
            {
            statement
              assign
                fib_val
                =
                expression_simple
                  exp_simple
                    term_simple
                      factor_id	x
                ;
            }
          else
          body_statement
            {
            statement
              f_call_one_expression
                CalculateFib
                (
                expression_simple
                  exp_minus
                    exp_simple
                      term_simple
                        factor_id	x
                    -
                    term_simple
                      factor_cte	1
                )
                ;
            statement
              assign
                local_temp_fib_n_minus_1
                =
                expression_simple
                  exp_simple
                    term_simple
                      factor_id	fib_val
                ;
            statement
              f_call_one_expression
                CalculateFib
                (
                expression_simple
                  exp_minus
                    exp_simple
                      term_simple
                        factor_id	x
                    -
                    term_simple
                      factor_cte	2
                )
                ;
            statement
              assign
                local_temp_fib_n_minus_2
                =
                expression_simple
                  exp_simple
                    term_simple
                      factor_id	fib_val
                ;
            statement
              assign
                fib_val
                =
                expression_simple
                  exp_plus
                    exp_simple
                      term_simple
                        factor_id	local_temp_fib_n_minus_1
                    +
                    term_simple
                      factor_id	local_temp_fib_n_minus_2
                ;
            }
          ;
      }
    ]
    ;
  main
  body_statement
    {
    statement
      assign
        n
        =
        expression_simple
          exp_simple
            term_simple
              factor_cte	10
        ;
    statement
      print_string
        print
        (
        "Recursive Fibonacci sequence up to F(9):"
        )
        ;
    statement
      assign
        i
        =
        expression_simple
          exp_simple
            term_simple
              factor_cte	0
        ;
    statement
      cycle
        while
        (
        expression_less_than
          exp_simple
            term_simple
              factor_id	i
          <
          exp_simple
            term_simple
              factor_id	n
        )
        do
        body_statement
          {
          statement
            f_call_one_expression
              CalculateFib
              (
              expression_simple
                exp_simple
                  term_simple
                    factor_id	i
              )
              ;
          statement
            f_call_one_expression
              print
              (
              expression_simple
                exp_simple
                  term_simple
                    factor_id	fib_val
              )
              ;
          statement
            assign
              i
              =
              expression_simple
                exp_plus
                  exp_simple
                    term_simple
                      factor_id	i
                  +
                  term_simple
                    factor_cte	1
              ;
          }
        ;
    }
  end



Árbol transformado (AST):
------------------------------
{'type': 'program_vars_funcs', 'program_name': {'type': 'id', 'value': 'FibonacciRecursive'}, 'vars': {'type': 'vars_multiple_ids', 'declarations': [{'ids': [{'type': 'id', 'value': 'i'}, {'type': 'id', 'value': 'n'}, {'type': 'id', 'value': 'fib_val'}], 'type': {'type': 'type_int', 'value': 'int'}}]}, 'funcs': [{'type': 'funcs_id', 'funcs_name': {'type': 'id', 'value': 'CalculateFib'}, 'param': {'type': 'id', 'value': 'x'}, 'param_type': {'type': 'type_int', 'value': 'int'}, 'vars': {'type': 'vars_multiple_ids', 'declarations': [{'ids': [{'type': 'id', 'value': 'local_temp_fib_n_minus_1'}, {'type': 'id', 'value': 'local_temp_fib_n_minus_2'}], 'type': {'type': 'type_int', 'value': 'int'}}], 'x': {'type': 'int', 'assigned': True, 'address': 1000}, 'local_temp_fib_n_minus_1': {'type': 'int', 'assigned': True, 'address': 1001}, 'local_temp_fib_n_minus_2': {'type': 'int', 'assigned': True, 'address': 1002}}, 'body': {'type': 'body_statement', 'value': [{'type': 'statement', 'value': {'type': 'condition_if_else', 'condition': {'type': 'expression_less_than', 'value': [{'type': 'exp_simple', 'value': {'type': 'term_simple', 'value': {'type': 'factor_id', 'value': {'type': 'id', 'value': 'x'}}}}, Token('LESS_THAN', '<'), {'type': 'exp_simple', 'value': {'type': 'term_simple', 'value': {'type': 'factor_cte', 'value': 2}}}]}, 'body1': {'type': 'body_statement', 'value': [{'type': 'statement', 'value': {'type': 'assign', 'id': {'type': 'id', 'value': 'fib_val'}, 'value': {'type': 'expression_simple', 'value': {'type': 'exp_simple', 'value': {'type': 'term_simple', 'value': {'type': 'factor_id', 'value': {'type': 'id', 'value': 'x'}}}}}}}]}, 'body2': {'type': 'body_statement', 'value': [{'type': 'statement', 'value': {'type': 'f_call_one_expression', 'function': {'type': 'id', 'value': 'CalculateFib'}, 'value': {'type': 'expression_simple', 'value': {'type': 'exp', 'value': [{'type': 'exp_simple', 'value': {'type': 'term_simple', 'value': {'type': 'factor_id', 'value': {'type': 'id', 'value': 'x'}}}}, Token('MINUS', '-'), {'type': 'term_simple', 'value': {'type': 'factor_cte', 'value': 1}}]}}}}, {'type': 'statement', 'value': {'type': 'assign', 'id': {'type': 'id', 'value': 'local_temp_fib_n_minus_1'}, 'value': {'type': 'expression_simple', 'value': {'type': 'exp_simple', 'value': {'type': 'term_simple', 'value': {'type': 'factor_id', 'value': {'type': 'id', 'value': 'fib_val'}}}}}}}, {'type': 'statement', 'value': {'type': 'f_call_one_expression', 'function': {'type': 'id', 'value': 'CalculateFib'}, 'value': {'type': 'expression_simple', 'value': {'type': 'exp', 'value': [{'type': 'exp_simple', 'value': {'type': 'term_simple', 'value': {'type': 'factor_id', 'value': {'type': 'id', 'value': 'x'}}}}, Token('MINUS', '-'), {'type': 'term_simple', 'value': {'type': 'factor_cte', 'value': 2}}]}}}}, {'type': 'statement', 'value': {'type': 'assign', 'id': {'type': 'id', 'value': 'local_temp_fib_n_minus_2'}, 'value': {'type': 'expression_simple', 'value': {'type': 'exp_simple', 'value': {'type': 'term_simple', 'value': {'type': 'factor_id', 'value': {'type': 'id', 'value': 'fib_val'}}}}}}}, {'type': 'statement', 'value': {'type': 'assign', 'id': {'type': 'id', 'value': 'fib_val'}, 'value': {'type': 'expression_simple', 'value': {'type': 'exp', 'value': [{'type': 'exp_simple', 'value': {'type': 'term_simple', 'value': {'type': 'factor_id', 'value': {'type': 'id', 'value': 'local_temp_fib_n_minus_1'}}}}, Token('PLUS', '+'), {'type': 'term_simple', 'value': {'type': 'factor_id', 'value': {'type': 'id', 'value': 'local_temp_fib_n_minus_2'}}}]}}}}]}}}]}}], 'body': {'type': 'body_statement', 'value': [{'type': 'statement', 'value': {'type': 'assign', 'id': {'type': 'id', 'value': 'n'}, 'value': {'type': 'expression_simple', 'value': {'type': 'exp_simple', 'value': {'type': 'term_simple', 'value': {'type': 'factor_cte', 'value': 10}}}}}}, {'type': 'statement', 'value': {'type': 'print_string', 'value': {'type': 'string', 'value': 'Recursive Fibonacci sequence up to F(9):'}}}, {'type': 'statement', 'value': {'type': 'assign', 'id': {'type': 'id', 'value': 'i'}, 'value': {'type': 'expression_simple', 'value': {'type': 'exp_simple', 'value': {'type': 'term_simple', 'value': {'type': 'factor_cte', 'value': 0}}}}}}, {'type': 'statement', 'value': {'type': 'cycle', 'condition': {'type': 'expression_less_than', 'value': [{'type': 'exp_simple', 'value': {'type': 'term_simple', 'value': {'type': 'factor_id', 'value': {'type': 'id', 'value': 'i'}}}}, Token('LESS_THAN', '<'), {'type': 'exp_simple', 'value': {'type': 'term_simple', 'value': {'type': 'factor_id', 'value': {'type': 'id', 'value': 'n'}}}}]}, 'body': {'type': 'body_statement', 'value': [{'type': 'statement', 'value': {'type': 'f_call_one_expression', 'function': {'type': 'id', 'value': 'CalculateFib'}, 'value': {'type': 'expression_simple', 'value': {'type': 'exp_simple', 'value': {'type': 'term_simple', 'value': {'type': 'factor_id', 'value': {'type': 'id', 'value': 'i'}}}}}}}, {'type': 'print_expression', 'value': {'type': 'expression_simple', 'value': {'type': 'exp_simple', 'value': {'type': 'term_simple', 'value': {'type': 'factor_id', 'value': {'type': 'id', 'value': 'fib_val'}}}}}}, {'type': 'statement', 'value': {'type': 'assign', 'id': {'type': 'id', 'value': 'i'}, 'value': {'type': 'expression_simple', 'value': {'type': 'exp', 'value': [{'type': 'exp_simple', 'value': {'type': 'term_simple', 'value': {'type': 'factor_id', 'value': {'type': 'id', 'value': 'i'}}}}, Token('PLUS', '+'), {'type': 'term_simple', 'value': {'type': 'factor_cte', 'value': 1}}]}}}}]}}}]}}


Directorio de funciones y variables:
------------------------------
Scope: global
Start Point: 0
  Variables:
    i : int | Dirección: 3000
    n : int | Dirección: 3001
    fib_val : int | Dirección: 3002
  Recursos: temporals(int=2), vars(int=3)

Scope: CalculateFib
Start Point: 1
  Parámetros:
    x : int
  Variables:
    x : int | Dirección: 1000
    local_temp_fib_n_minus_1 : int | Dirección: 1001
    local_temp_fib_n_minus_2 : int | Dirección: 1002
  Recursos: temporals(int=4), vars(int=2), params(int=1)



Cuádruplos generados:
------------------------------
0   10                               18        
1   6          1000       7000       5000      
2   11         5000                  5         
3   7          1000                  3002      
4   10                               17        
5   13         CalculateFib                      
6   2          1000       7001       5001      
7   15         5001                  p1        
8   14         CalculateFib                      
9   7          3002                  1001      
10  13         CalculateFib                      
11  2          1000       7000       5002      
12  15         5002                  p1        
13  14         CalculateFib                      
14  7          3002                  1002      
15  1          1001       1002       5003      
16  7          5003                  3002      
17  16                                         
18  7          7002                  3001      
19  9                                9000      
20  17                                         
21  7          7003                  3000      
22  6          3000       3001       5004      
23  11         5004                  32        
24  13         CalculateFib                      
25  15         3000                  p1        
26  14         CalculateFib                      
27  9                                3002      
28  17                                         
29  1          3000       7001       5005      
30  7          5005                  3000      
31  10                               22        


Tabla de constantes:
------------------------------
Valor: 2          | Tipo: int        | Dirección: 7000      
Valor: 1          | Tipo: int        | Dirección: 7001      
Valor: 10         | Tipo: int        | Dirección: 7002      
Valor: Recursive Fibonacci sequence up to F(9): | Tipo: string     | Dirección: 9000      
Valor: 0          | Tipo: int        | Dirección: 7003      


Uso de memoria:
------------------------------
LOCAL
INT -> Rango: 1000 - 1999 | Dirección actual: 1003
FLOAT -> Rango: 2000 - 2999 | Dirección actual: 2000
-----------------------------------------------------------
GLOBAL
INT -> Rango: 3000 - 3999 | Dirección actual: 3003
FLOAT -> Rango: 4000 - 4999 | Dirección actual: 4000
-----------------------------------------------------------
TEMPORAL
INT -> Rango: 5000 - 5999 | Dirección actual: 5006
FLOAT -> Rango: 6000 - 6999 | Dirección actual: 6000
-----------------------------------------------------------
CONSTANTE
INT -> Rango: 7000 - 7999 | Dirección actual: 7004
FLOAT -> Rango: 8000 - 8999 | Dirección actual: 8000
STRING -> Rango: 9000 - 9999 | Dirección actual: 9001
-----------------------------------------------------------


Salida de la Máquina Virtual:
------------------------------
Recursive Fibonacci sequence up to F(9):
0
1
1
2
3
5
8
13
21
34
